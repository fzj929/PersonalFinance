# 安全文档 - 个人记账系统

## 安全特性

### 1. 认证与授权
- **JWT认证**: 使用JSON Web Token进行用户身份验证
- **密码加密**: 使用HMACSHA512算法进行密码哈希和盐值加密
- **令牌过期**: JWT令牌设置7天有效期
- **权限控制**: 用户只能访问自己的数据

### 2. 数据安全
- **SQL注入防护**: 使用Entity Framework参数化查询
- **数据隔离**: 严格的用户数据隔离机制
- **输入验证**: 前后端双重输入验证
- **XSS防护**: 自动HTML编码输出

### 3. 传输安全
- **HTTPS推荐**: 生产环境强制使用HTTPS
- **CORS配置**: 严格的前端域名限制
- **敏感信息**: 密码等敏感信息不记录日志

## 安全最佳实践

### 密码安全
```csharp
// 密码哈希示例
using var hmac = new HMACSHA512();
passwordSalt = hmac.Key;
passwordHash = hmac.ComputeHash(Encoding.UTF8.GetBytes(password));
```

### JWT配置
```json
{
  "JwtSettings": {
    "SecretKey": "32字符以上的强密钥",
    "Issuer": "PersonalFinanceAPI",
    "Audience": "PersonalFinanceClient"
  }
}
```

### 数据库安全
- 使用SQLite本地数据库
- 定期备份重要数据
- 敏感字段加密存储

## 安全审计

### 定期检查项
1. JWT密钥强度
2. 密码哈希算法
3. CORS配置
4. 输入验证规则
5. 错误信息泄露

### 日志监控
- 记录登录尝试
- 监控异常请求
- 跟踪数据修改操作

## 应急响应

### 安全事件处理
1. 立即撤销受影响用户的JWT令牌
2. 检查数据库异常操作
3. 更新安全密钥
4. 通知受影响用户

### 联系方式
- 安全负责人: [填写负责人信息]
- 紧急响应: [填写紧急联系方式]

## 版本更新安全

### 安全更新策略
1. 定期更新依赖包
2. 及时修复安全漏洞
3. 测试环境先行验证
4. 生产环境灰度发布

---

*最后更新: 2024-01-20*
*文档版本: v1.0*